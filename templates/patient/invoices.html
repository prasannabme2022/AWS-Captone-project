{% extends "base.html" %}

{% block content %}
<h1 class="text-gradient">Financials & Insurance</h1>
<p style="color: #6b7280; margin-bottom: 2rem;">Manage your medical bills and insurance claims.</p>

<div class="glass-panel" style="padding: 0; overflow: hidden;">
    <table style="width: 100%; border-collapse: collapse; text-align: left;">
        <thead style="background: rgba(0, 114, 255, 0.05); border-bottom: 1px solid #e5e7eb;">
            <tr>
                <th style="padding: 1rem;">Date</th>
                <th style="padding: 1rem;">Description</th>
                <th style="padding: 1rem;">Amount</th>
                <th style="padding: 1rem;">Status</th>
                <th style="padding: 1rem;">Action</th>
            </tr>
        </thead>
        <tbody>
            {% if not invoices %}
            <tr>
                <td colspan="5" style="padding: 2rem; text-align: center; color: #9ca3af;">No invoices found.</td>
            </tr>
            {% else %}
            {% for inv in invoices %}\r\n \u003ctr style=\"border-bottom: 1px solid #f3f4f6;\"\u003e\r\n \u003ctd
            style=\"padding: 1rem;\"\u003e{{ inv.created_at[:10] if inv.created_at else 'N/A' }}\u003c/td\u003e\r\n
            \u003ctd style=\"padding: 1rem; font-weight: 500;\"\u003e{{ inv.description }}\u003c/td\u003e\r\n \u003ctd
            style=\"padding: 1rem;\"\u003eâ‚¹{{ inv.amount }}\u003c/td\u003e\r\n \u003ctd style=\"padding:
            1rem;\"\u003e\r\n \u003cspan class=\"status-badge\" \r\n style=\"background: {{ '#d1fae5' if
            inv.insurance_claimed else '#fef3c7' if inv.status == 'paid' else '#fee2e2' }}; \r\n color: {{ '#065f46' if
            inv.insurance_claimed else '#92400e' if inv.status == 'paid' else '#991b1b' }}\"\u003e\r\n {{ 'Claimed' if
            inv.insurance_claimed else inv.status.upper() }}\r\n \u003c/span\u003e\r\n \u003c/td\u003e\r\n \u003ctd
            style=\"padding: 1rem; display: flex; gap: 0.5rem;\"\u003e\r\n {% if inv.status == 'unpaid' and not
            inv.insurance_claimed %}\r\n \u003ca href=\"{{ url_for('pay_invoice', invoice_id=inv.invoice_id) }}\"
            class=\"btn\"\r\n style=\"padding: 0.5rem 1rem; font-size: 0.9rem; background: var(--primary); color: white;
            text-decoration: none; border-radius: 6px;\"\u003e\r\n \u003ci class=\"fas
            fa-credit-card\"\u003e\u003c/i\u003e Pay Now\r\n \u003c/a\u003e\r\n \u003ca href=\"{{
            url_for('claim_insurance_route', invoice_id=inv.invoice_id) }}\" class=\"btn\"\r\n style=\"padding: 0.5rem
            1rem; font-size: 0.9rem; background: var(--secondary); color: white; text-decoration: none; border-radius:
            6px;\"\u003e\r\n \u003ci class=\"fas fa-shield-alt\"\u003e\u003c/i\u003e Claim\r\n \u003c/a\u003e\r\n {%
            else %}\r\n \u003cspan style=\"color: #9ca3af; font-size: 0.9rem;\"\u003e\u003ci class=\"fas
            fa-check\"\u003e\u003c/i\u003e Processed\u003c/span\u003e\r\n {% endif %}\r\n \u003c/td\u003e\r\n
            \u003c/tr\u003e\r\n {% endfor %}\r
            {% endif %}
        </tbody>
    </table>
</div>

<div
    style="margin-top: 2rem; background: #f0fdf4; border: 1px solid #bbf7d0; padding: 1.5rem; border-radius: 12px; display: flex; align-items: start; gap: 1rem;">
    <i class="fas fa-shield-alt" style="font-size: 2rem; color: #16a34a;"></i>
    <div>
        <h4 style="margin: 0 0 0.5rem 0; color: #166534;">Insurance Coverage Active</h4>
        <p style="margin: 0; color: #15803d; font-size: 0.9rem;">Your account is linked to <strong>Global Health
                Insurance</strong>. You can claim instantly for consultation fees.</p>
    </div>
</div>
{% endblock %}